[include shell_command.cfg]
[include macros.cfg]

[exclude_object]
[respond]
[pause_resume]
[display_status]
[virtual_sdcard]
path: ~/printer_data/gcodes

[include ./probes/carto.cfg]

[mcu]
canbus_uuid: aaaf7ee9f59f

[mcu EBBCan]
canbus_uuid: 29668784ed95

# [include resonance.cfg]
[include extruder.cfg]
[include steppers.cfg]

[force_move]
enable_force_move: True

[safe_z_home]
home_xy_position: 160, 160
z_hop: 20

[firmware_retraction]
retract_length: 0.8
#   The length of filament (in mm) to retract when G10 is activated,
#   and to unretract when G11 is activated (but see
#   unretract_extra_length below). The default is 0 mm.
retract_speed: 60
#   The speed of retraction, in mm/s. The default is 20 mm/s.
# unretract_extra_length: 0.5
#   The length (in mm) of *additional* filament to add when
#   unretracting.
unretract_speed: 60
#   The speed of unretraction, in mm/s. The default is 10 mm/s.
z_hop_height: 0.1 # kalico

[z_tilt]
z_positions: -35,160
            355,160
points: 40, 215
        120, 215
        200, 215
        280, 215
retries: 5
retry_tolerance: 0.06
increasing_threshold: 0.005 # Kalico
horizontal_move_z: 3
speed: 200
adaptive_horizontal_move_z: True # Kalico
use_probe_xy_offsets: True # kalico

[axis_twist_compensation]
calibrate_start_x: 40
calibrate_end_x: 280
calibrate_y: 160
calibrate_start_y: 40
calibrate_end_y: 300
calibrate_x: 160
horizontal_move_z: 3

[printer]
kinematics: cartesian
max_velocity: 300
max_accel: 6000
max_z_velocity: 25
max_z_accel: 1000
## Uncomment for Input Shaper calibrations
# max_accel: 10000

[input_shaper]
# shaper_type_x: smooth_mzv
# shaper_freq_x: 57.6
# shaper_type_y: 2hump_ei
# shaper_freq_y: 51.0

[filament_switch_sensor material_0]
switch_pin: PC5
pause_on_runout: true

[heater_bed]
heater_pin: PB2 #HB
sensor_type: EPCOS 100K B57560G104F #Generic 3950
sensor_pin: PA3 #TB
#control: watermark
min_temp: 0
max_temp: 100

[bed_screws]
screw1: 65, 13
screw1_name: left front screw
screw2: 65, 145
screw2_name: left middle screw
screw3: 65, 280
screw3_name: left back screw
screw4: 318, 13
screw4_name: right front screw
screw5: 318, 145
screw5_name: right middle screw
screw6: 318, 280
screw6_name: right back screw

[screws_tilt_adjust]
screw1: 65, 13
screw1_name: left front screw
screw2: 65, 145
screw2_name: left middle screw
screw3: 65, 280
screw3_name: left back screw
screw4: 318, 13
screw4_name: right front screw
screw5: 318, 145
screw5_name: right middle screw
screw6: 318, 280
screw6_name: right back screw

[board_pins]
aliases:
    # EXP1 header
    EXP1_1=PC1, EXP1_3=PC3, EXP1_5=PC0, EXP1_7=PA2, EXP1_9=<GND>,
    EXP1_2=PC2,  EXP1_4=<RST>, EXP1_6=PA0, EXP1_8=PA1, EXP1_10=<5V>

[temperature_sensor rpi_temp]
sensor_type: temperature_host

# [temperature_sensor mcu_temp]
# sensor_type: temperature_mcu
# sensor_temperature1: 25
# sensor_adc1: 0.210317

[temperature_sensor EBB]
sensor_type: temperature_mcu
sensor_mcu: EBBCan

[led LED_Light]
white_pin: PA8
initial_white: 0.0

[fan]
pin: EBBCan: PA0

[heater_fan hotend_fan]
pin: EBBCan: PA1
heater: extruder
heater_temp: 50.0

[temperature_fan mobofan]
pin: PB14
# sensor_type: temperature_host # Use temperature_host for Raspberry Pi, temperature_mcu for MCU sensor
sensor_type: temperature_mcu
control: pid
pid_Kp: 2.0
pid_Ki: 5.0
pid_Kd: 0.5
pid_deriv_time: 2.0
min_temp: 10
max_temp: 100
target_temp: 50
min_speed: 0.4

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 69.490
#*# pid_ki = 0.617
#*# pid_kd = 1957.009
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 34.776
#*# pid_ki = 2.696
#*# pid_kd = 112.151
#*#
#*# [axis_twist_compensation]
#*# z_compensations = -0.004785, 0.002030, 0.002755
#*# compensation_start_x = 40.0
#*# compensation_end_x = 280.0
#*#
#*# [input_shaper]
#*# shaper_type_x = smooth_mzv
#*# shaper_freq_x = 57.6
#*# shaper_type_y = 2hump_ei
#*# shaper_freq_y = 51.0
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.116387, -0.079750, -0.072016, -0.061640, -0.045886, -0.040936, -0.040142, -0.044689, -0.043829, -0.041581, -0.056303, -0.067128, -0.076562, -0.077844, -0.081873, -0.091436, -0.100970, -0.099524, -0.091098, -0.091070
#*# 	  -0.133078, -0.098889, -0.089750, -0.077966, -0.059453, -0.057197, -0.057731, -0.060921, -0.054683, -0.051104, -0.064486, -0.080771, -0.086157, -0.090206, -0.086006, -0.099674, -0.099582, -0.105045, -0.091161, -0.104862
#*# 	  -0.120532, -0.079750, -0.070615, -0.056201, -0.033848, -0.030224, -0.029436, -0.033886, -0.033025, -0.026854, -0.040091, -0.050773, -0.058845, -0.066877, -0.062720, -0.074977, -0.080313, -0.082975, -0.080130, -0.088244
#*# 	  -0.108115, -0.074278, -0.065225, -0.048133, -0.028398, -0.019567, -0.024029, -0.025815, -0.019662, -0.013449, -0.026682, -0.037297, -0.045322, -0.047875, -0.049174, -0.061229, -0.069339, -0.071988, -0.063719, -0.082728
#*# 	  -0.113605, -0.070145, -0.065225, -0.045428, -0.025787, -0.016892, -0.018706, -0.019217, -0.016985, -0.008103, -0.018630, -0.031901, -0.042613, -0.046519, -0.045139, -0.055846, -0.063937, -0.069310, -0.066419, -0.074611
#*# 	  -0.110827, -0.074278, -0.062501, -0.045428, -0.020428, -0.011618, -0.012058, -0.012498, -0.001048, 0.005123, -0.005337, -0.023867, -0.031846, -0.039816, -0.037022, -0.050474, -0.061206, -0.071988, -0.061023, -0.085548
#*# 	  -0.117748, -0.077010, -0.065225, -0.045428, -0.023070, -0.011546, -0.005429, -0.007230, -0.003635, 0.006449, -0.007931, -0.021219, -0.033194, -0.037113, -0.041077, -0.053158, -0.063937, -0.072051, -0.069192, -0.080039
#*# 	  -0.113605, -0.079687, -0.066589, -0.045428, -0.023106, -0.008952, -0.006724, -0.007158, -0.001048, 0.005123, -0.010605, -0.023867, -0.034506, -0.034414, -0.039724, -0.053124, -0.063937, -0.071988, -0.066419, -0.082793
#*# 	  -0.121955, -0.079687, -0.067953, -0.050842, -0.025787, -0.012919, -0.010685, -0.009824, -0.006298, -0.000115, -0.015952, -0.029280, -0.037205, -0.041135, -0.042430, -0.055846, -0.063937, -0.072019, -0.071896, -0.082791
#*# 	  -0.113574, -0.074278, -0.061174, -0.042793, -0.020428, -0.008952, -0.005429, -0.007194, -0.001048, 0.002542, -0.015952, -0.034597, -0.042546, -0.042522, -0.045071, -0.055846, -0.066670, -0.072051, -0.066487, -0.086927
#*# 	  -0.113605, -0.068814, -0.057062, -0.040026, -0.017753, -0.006290, -0.005393, -0.007158, -0.003707, -0.000115, -0.015952, -0.029208, -0.037205, -0.042454, -0.039724, -0.050406, -0.061206, -0.069279, -0.063721, -0.080039
#*# 	  -0.116386, -0.079687, -0.062501, -0.045428, -0.025787, -0.014287, -0.016098, -0.020450, -0.016985, -0.010810, -0.029299, -0.038648, -0.045254, -0.045163, -0.047783, -0.053192, -0.063937, -0.070649, -0.069156, -0.088277
#*# 	  -0.127478, -0.090674, -0.073349, -0.053554, -0.036468, -0.027610, -0.029400, -0.031265, -0.033062, -0.029471, -0.042796, -0.050773, -0.061504, -0.058755, -0.055971, -0.064028, -0.072079, -0.080222, -0.078758, -0.091070
#*# 	  -0.119167, -0.085177, -0.069284, -0.050842, -0.033775, -0.030297, -0.037443, -0.041984, -0.041123, -0.034861, -0.050864, -0.058936, -0.066969, -0.061481, -0.058662, -0.061297, -0.069339, -0.071988, -0.069219, -0.086896
#*# 	  -0.119167, -0.085177, -0.073349, -0.056235, -0.039165, -0.034297, -0.042845, -0.050042, -0.054615, -0.048321, -0.064452, -0.072537, -0.080680, -0.080588, -0.077752, -0.077661, -0.077569, -0.078881, -0.074640, -0.085548
#*# 	  -0.121897, -0.090674, -0.076149, -0.064365, -0.047272, -0.043706, -0.050971, -0.060921, -0.065519, -0.056475, -0.075372, -0.087660, -0.091711, -0.086097, -0.086006, -0.083158, -0.085822, -0.080222, -0.069219, -0.078698
#*# 	  -0.119167, -0.090643, -0.078889, -0.067092, -0.049981, -0.049120, -0.053618, -0.064980, -0.070984, -0.068726, -0.083616, -0.091802, -0.102724, -0.102633, -0.096993, -0.099674, -0.099614, -0.096719, -0.082883, -0.085548
#*# 	  -0.121955, -0.090643, -0.081570, -0.069755, -0.060780, -0.054479, -0.061782, -0.066379, -0.073662, -0.067358, -0.082239, -0.086280, -0.097213, -0.094322, -0.091466, -0.091373, -0.094079, -0.082975, -0.070557, -0.073208
#*# 	  -0.117748, -0.087921, -0.081632, -0.075226, -0.063572, -0.065370, -0.072674, -0.077328, -0.084648, -0.078290, -0.094660, -0.094536, -0.108221, -0.104022, -0.099766, -0.094202, -0.096873, -0.085731, -0.071896, -0.063662
#*# 	  -0.127478, -0.096126, -0.098028, -0.083456, -0.082595, -0.076275, -0.091885, -0.096553, -0.098392, -0.092034, -0.111190, -0.108376, -0.119376, -0.110915, -0.105320, -0.099706, -0.105137, -0.091190, -0.071896, -0.063662
#*# x_count = 20
#*# y_count = 20
#*# mesh_x_pps = 0
#*# mesh_y_pps = 0
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 22.0
#*# max_x = 310.0
#*# min_y = 22.0
#*# max_y = 305.0
#*#
#*# [cartographer scan_model default]
#*# coefficients = 1.4259702467930955,1.899838903337992,0.846954159717641,0.40508606577288503,0.4497979186464444,0.519746998493002,-0.25606838566462864,-0.476591712316177,0.3326541456590814,0.35358431451573585
#*# domain = 3.21645891661695e-07,3.3508101688119907e-07
#*# z_offset = 0
#*# reference_temperature = 27.61
#*#
#*# [cartographer touch_model default]
#*# threshold = 2733
#*# speed = 2
#*# z_offset = -0.05
#*#
#*# [cartographer]
#*# z_backlash = 0.00373
